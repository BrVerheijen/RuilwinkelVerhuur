@model RuilwinkelVerhuur.Models.Classes.FactuurViewModel
@using RuilwinkelVerhuur.Models.Classes



@{
    var productList = ProductComm.retrieveList();
    int userID = ViewBag.userID;
    var factuurlist = new List<Factuur> { };
    foreach (var item in Model.FacturenViewModel)
    {
        if (item.UserID == userID)
        {
            factuurlist.Add(item);
        }
    }

}




<div class="text-center">
    <style>
        button.ex1 {
            margin: 0px 0px 0px 100px;
        }
    </style>
    <h1 class="display-4">Mijn Orders</h1>


    @if (factuurlist.Count() == 0)
    {
        <h1>Geen Orders</h1>
    }
    else
    {
        @foreach (var factuur in factuurlist)
        {
            <form action="@Url.Action("RefundFactuur", "Home", new { id = factuur.ID})" onSubmit="if(!confirm('Weet u zeker dat u de order wilt annuleren?')){return false;}">
                <input type="submit" value="Order annuleren" />
            </form>
            @*<p style="background-color:lightgray;">
                    Factuur ID: @factuur.ID
                    <button onclick="CancelOrderFunction()" class="ex1">Annuleer</button>
                    <script>
                        function CancelOrderFunction() {
                            var txt;
                            var r = confirm("Weet u zeker dat u deze order wil verwijderen");
                            if (r == true) {
                                txt = "Order is verwijderd";
                            }

                        }
                    </script>


                </p>*@

            <table class="table" style="margin: 0px 0px 60px 0px;">
                <thead>
                    <tr>
                        <th>
                            Naam
                        </th>
                        <th>
                            Afbeelding
                        </th>
                        <th>
                            Prijs
                        </th>
                        <th>
                            Ingangsdatum
                        </th>
                        <th>
                            Huurlengte
                        </th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>

                    @foreach (var item in Model.ProductNaarFactuurViewModel)
                    {
                        @if (item.FactuurID == factuur.ID)
                        {
                            @foreach (var product in productList)
                            {

                                @if (product.ID == item.ProductID)
                                {
                                    <tr>
                                        <td>
                                            @Html.DisplayFor(modelItem => product.Name)
                                        </td>
                                        <td>
                                            <img src="@product.Picture" height="150" />
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => product.Cost)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.StartDate)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.HuurLengte)
                                        </td>
                                        <td>
                                            <form action="@Url.Action("RefundProduct", "Home", new { id = item.ID})" onSubmit="if(!confirm('Weet u zeker dat u het product wilt annuleren?')){return false;}">
                                                <input type="submit" value="Product annuleren" />
                                            </form>

                                            @*<button onclick="CancelProductFunction()">Annuleer</button>
                                            <script>
                                                function CancelProductFunction() {
                                                    var txt;
                                                    var r = confirm("Weet u zeker dat je dit wilt verwijderen");
                                                    if (r == true) {
                                                        txt = "Product is  verwijderd";
                                                    }


                                                }
                                            </script>*@
                                        </td>
                                    </tr>

                                }

                            }
                        }

                    }
                </tbody>
            </table>


        }
    }



</div>

